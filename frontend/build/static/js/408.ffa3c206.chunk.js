"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[408],{6408:function(n,e,t){t.r(e);var i=t(4165),a=t(5861),o=t(1413),r=t(885),c=t(5009),u=t(803),l=t(6015),s=t(4565),d=t(5953),f=t(1044),h=t(2791),m=t(8371),p=t(8660),v=t(2869),b=t(184);e.default=function(){var n=(0,h.useState)(null),e=(0,r.Z)(n,2),t=e[0],Z=e[1],x=(0,h.useState)(null),y=(0,r.Z)(x,2),D=y[0],g=y[1],I=(0,h.useContext)(v.y),j=f.ZP.create({baseURL:"https://www.omdbapi.com/"}),w=f.ZP.create({baseURL:"http://ec2-18-228-24-92.sa-east-1.compute.amazonaws.com:8080/"}),k=function(n){if(n.onLibrary)return w.delete("api/movie",{data:{imdbID:n.imdbID}}).then((function(){var e=null===t||void 0===t?void 0:t.map((function(e){return e.imdbID!==n.imdbID?e:(0,o.Z)((0,o.Z)({},e),{},{onLibrary:!1})}));null===I||void 0===I||I.handleAlert(!1,n.Title),Z(null!==e&&void 0!==e?e:t)})).catch((function(n){return console.log(n)}));w.post("api/movie",{Title:n.Title,Poster:n.Poster,Year:n.Year,imdbRating:n.imdbRating,imdbID:n.imdbID}).catch((function(n){return console.log(n)}));var e=null===t||void 0===t?void 0:t.map((function(e){return e.imdbID!==n.imdbID?e:(0,o.Z)((0,o.Z)({},e),{},{onLibrary:!0})}));null===I||void 0===I||I.handleAlert(!0,n.Title),Z(null!==e&&void 0!==e?e:t)};return(0,h.useEffect)((function(){if(null===D||void 0===D)return Z(null);j.get("?apikey=".concat("2d7f536f","&s=").concat(D,"&type=movie")).then(function(){var n=(0,a.Z)((0,i.Z)().mark((function n(e){var t,a,r,c;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.data.Search,a=[],r=[],c=[],n.next=6,w.get("api/movies").then((function(n){n.data.forEach((function(n){a.push(n)}))}));case 6:return t.forEach((function(n){r.push(j.get("?apikey=".concat("2d7f536f","&i=").concat(n.imdbID)))})),n.next=9,Promise.all(r).then((function(n){n.forEach((function(n){var e=!1;void 0!==a.find((function(e){return e.imdbID===n.data.imdbID}))&&(e=!0),c.push((0,o.Z)((0,o.Z)({},n.data),{},{onLibrary:e}))}))}));case 9:Z(c);case 10:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(n){console.log(n)}))}),[D]),(0,b.jsxs)(u.Z,{children:[(0,b.jsxs)(l.Z,{mb:3,pr:2,display:"flex",justifyContent:"space-between",children:[(0,b.jsx)(s.Z,{variant:"h1",children:"Search"}),(0,b.jsx)(c.Z,{value:D,onChange:function(n){return g(n)},onCancelResearch:function(){return g(null)}})]}),(0,b.jsxs)(d.ZP,{container:!0,spacing:2,children:[!t&&(0,b.jsxs)(l.Z,{width:"300px",display:"flex",flexDirection:"column",alignItems:"center",mx:"auto",children:[(0,b.jsx)(p.Z,{}),(0,b.jsxs)(s.Z,{variant:"body2",children:["We couldn\xb4t find the movies you were lookin for :("," "]})]}),null===t||void 0===t?void 0:t.map((function(n){return(0,b.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,b.jsx)(m.Z,{movieData:n,handleToggle:k})},n.imdbID)}))]})]})}}}]);
//# sourceMappingURL=408.ffa3c206.chunk.js.map